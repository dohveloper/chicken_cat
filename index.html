<!DOCTYPE html>
<html>
  <head>
    <title>Chicken Cat</title>
    <link rel="stylesheet" href="styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@500;800;900&display=swap" rel="stylesheet">
    <script>
      function myFunction() {
        document.getElementById('demo').innerHTML = 'Paragraph changed.';
      }
    </script>
  </head>
  <body oncontextmenu="return false;"onselectstart="return false" >
    <div class="catContainer" />
      <div class="bg-line"></div>
      
      <img class="cat__body" alt="cat_body" src="./img/cat.png" />
      <img class="cat__mouth--meow none" alt="meow_mouth" src="./img/meow_mouth.png" />
      <!--Left side-->
      <img class="cat__hand-left--up" alt="handup_left" src="./img/left_up.png" />
      <img class="cat__hand-left--down none" alt="handdown_left" src="./img/left_down.png" />

      <img class="chicken-left--up" alt="chicken_left" src="./img/chicken_before.png" />
      <img class="chicken-left--down none" alt="chicken_left" src="./img/chicken_after.png" />

      <!--Right side-->
      <img class="cat__hand-right--up" alt="handup_right" src="./img/right_up.png" />
      <img class="cat__hand-right--down none" alt="handdown_right" src="./img/right_down.png" />

      <img class="chicken-right--up" alt="chicken_right" src="./img/chicken_before.png" />
      <img class="chicken-right--down none" alt="chicken_right" src="./img/chicken_after.png" />
    </div>
    <div class="keys">
      <div class="keys__hitChicken">
        <span class="key__text">Hit The Chicken</span>
        <span class="key">←</span>
        <span class="key"> &nbsp↑</span>
        <span class="key"> &nbsp↓</span>
        <span class="key">→</span>
      </div>
      <div class="keys__meow">
        <span class="key__text">Meow</span>
        <span class="key key__space">SPACE</span>
      </div>
    </div>
    <script>
      //flag for play sound only once per press
      let isLeftFired = false;
      let isRightFired = false;
      let isMeowFired=false;
       document.onmousedown = mouseDown;
      document.onmouseup = mouseUp;
      document.onkeydown = keyDown;
      document.onkeyup = keyUp;

      //Mouse Event 
      function mouseDown(event) {
        //Check whether it is a left-click or a right-click.
        switch (event.which) {
          case 1:
              handDown('left');
            playSound('leftDown');
            isLeftFired = true;
            break;
            break;
          case 2:
             handDown('left');
            handDown('right');
            playSound('leftDown');
            playSound('rightDown');
            isLeftFired = true;
            isRightFired = true;
            break;
          case 3:
            handDown('right');
            playSound('rightDown');
            isRightFired = true;
            break;
        }
      }
      function mouseUp(event) {
        //Check whether it is a left-click or a right-click.
        switch (event.which) {
          case 1:
             handUp('left');
            playSound('leftUp');
            isLeftFired = false;
            break;
          case 2:
            handUp('right');
            playSound('rightUp');
            isRightFired = false;
          case 3:
             handUp('right');
            playSound('rightUp');
            isRightFired = false;
            break;
        }
      }
      
      //Key Event
      function keyDown() {
        switch (event.keyCode) {
          //Left Key
          case 37:
            handDown('left');
            playSound('leftDown');
            isLeftFired = true;
            break;
          //Up,Down Key
          case 38:
          case 40:
            handDown('left');
            handDown('right');
            playSound('leftDown');
            playSound('rightDown');
            isLeftFired = true;
            isRightFired = true;
            break;
          //Right Key
          case 39:
            handDown('right');
            playSound('rightDown');
            isRightFired = true;
            break;
          //Space Key
          case 32:
            doMeowMouth();
            playSound('meow');
            isMeowFired = true;
            break;
        }
      }
      function keyUp() {
        switch (event.keyCode) {
          //Left Key
          case 37:
            handUp('left');
            playSound('leftUp');
            isLeftFired = false;
            break;
          //Left,Right Key
          case 38:
          case 40:
            handUp('left');
            handUp('right');
            playSound('leftUp');
            playSound('rightUp');
            isLeftFired = false;
            isRightFired = false;
            break;
          //Right Key
          case 39:
            handUp('right');
            playSound('rightUp');
            isRightFired = false;
            break;
          //Space Key
          case 32:
            endMeowMouth();
            isMeowFired = false;
            break;
        }
      }
      //Sound
      function playSound(sound) {
        //only play sound for once(with help of isLeftFired&&isRightFired)
        let audio;
        if (sound == 'leftDown'&&isLeftFired===false) {
          audio = new Audio('./sound/sound1-1.mp3');
          audio.play();
        }
        if (sound == 'rightDown'&&isRightFired===false) {
          audio = new Audio('./sound/sound2-1.mp3');
          audio.play();
        }
        if (sound == 'leftUp') {
          audio = new Audio('./sound/sound1-2.mp3');
          audio.play();
        }
        if (sound == 'rightUp') {
          audio = new Audio('./sound/sound2-2.mp3');
          audio.play();
        }
         if (sound == 'meow' && isMeowFired===false) {
          audio = new Audio('./sound/meow.mp3');
          audio.play();
        }
        
      }
      
      function doMeowMouth(){
        let mouth = document.getElementsByClassName(`cat__mouth--meow`)[0];
        mouth.classList.remove('none');
      }
      function endMeowMouth(){
        let mouth = document.getElementsByClassName(`cat__mouth--meow`)[0];
        mouth.className += ' none';
      }

      //Hand Motion
      function handDown(side) {
        let upHand = document.getElementsByClassName(`cat__hand-${side}--up`)[0];
        let upChicken = document.getElementsByClassName(`chicken-${side}--up`)[0];
        let downHand = document.getElementsByClassName(`cat__hand-${side}--down`)[0];
        let downChicken = document.getElementsByClassName(`chicken-${side}--down`)[0];

        //Remove upHand & upChicken by adding "none" class
        upHand.className += ' none';
        upChicken.className += ' none';

        //Make appear downHand & downChicken by removing "none" class
        downHand.classList.remove('none');
        downChicken.classList.remove('none');
      }
      function handUp(side) {
        let upHand = document.getElementsByClassName(`cat__hand-${side}--up`)[0];
        let upChicken = document.getElementsByClassName(`chicken-${side}--up`)[0];
        let downHand = document.getElementsByClassName(`cat__hand-${side}--down`)[0];
        let downChicken = document.getElementsByClassName(`chicken-${side}--down`)[0];

        //Remove downHand & downChicken by adding "none" class
        downHand.className += ' none';
        downChicken.className += ' none';

        //Make appear upHand & upChicken by removing "none" class
        upHand.classList.remove('none');
        upChicken.classList.remove('none');
      }
    </script>
  </body>
</html>
